<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOARC - Cadastro de Voluntário</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="login-container">
        <div class="login-card" style="max-width: 600px;">
            <div class="login-header">
                <h1 class="login-title">Cadastro de Voluntário</h1>
                <p class="login-subtitle">Preencha os dados para criar sua conta</p>
            </div>

            <form id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nome" class="form-label required">Nome Completo</label>
                        <input
                            type="text"
                            id="nome"
                            class="form-control"
                            placeholder="Digite seu nome completo"
                            required
                        >
                        <div class="form-error">Nome é obrigatório</div>
                    </div>

                    <div class="form-group">
                        <label for="cpf" class="form-label required">CPF</label>
                        <input
                            type="text"
                            id="cpf"
                            class="form-control"
                            placeholder="000.000.000-00"
                            data-mask="cpf"
                            required
                        >
                        <div class="form-error">CPF inválido</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email" class="form-label required">E-mail</label>
                        <input
                            type="email"
                            id="email"
                            class="form-control"
                            placeholder="seu@email.com"
                            required
                        >
                        <div class="form-error">E-mail inválido</div>
                    </div>

                    <div class="form-group">
                        <label for="telefone" class="form-label required">Telefone</label>
                        <input
                            type="tel"
                            id="telefone"
                            class="form-control"
                            placeholder="(00) 00000-0000"
                            data-mask="phone"
                            required
                        >
                        <div class="form-error">Telefone inválido</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="dataNascimento" class="form-label required">Data de Nascimento</label>
                        <input
                            type="date"
                            id="dataNascimento"
                            class="form-control"
                            required
                        >
                        <div class="form-error">Data de nascimento é obrigatória</div>
                    </div>

                    <div class="form-group">
                        <label for="endereco" class="form-label">Endereço</label>
                        <input
                            type="text"
                            id="endereco"
                            class="form-control"
                            placeholder="Rua, número, bairro"
                        >
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="password" class="form-label required">Senha</label>
                        <input
                            type="password"
                            id="password"
                            class="form-control"
                            placeholder="Mínimo 6 caracteres"
                            required
                        >
                        <div class="form-error">Senha deve ter no mínimo 6 caracteres</div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label required">Confirmar Senha</label>
                        <input
                            type="password"
                            id="confirmPassword"
                            class="form-control"
                            placeholder="Digite a senha novamente"
                            required
                        >
                        <div class="form-error">As senhas não coincidem</div>
                    </div>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        Cadastrar
                    </button>
                </div>

                <div class="text-center">
                    <p style="margin-top: 1rem; color: var(--text-light);">
                        Já tem uma conta?
                        <a href="index.html" style="color: var(--primary-color); text-decoration: none; font-weight: 500;">
                            Faça login aqui
                        </a>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const nome = document.getElementById('nome');
            const cpf = document.getElementById('cpf');
            const email = document.getElementById('email');
            const telefone = document.getElementById('telefone');
            const dataNascimento = document.getElementById('dataNascimento');
            const endereco = document.getElementById('endereco');
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirmPassword');

            // Limpa erros anteriores
            Validator.clearAllErrors(this);

            // Validações
            let isValid = true;

            if (Validator.isEmpty(nome.value)) {
                Validator.showError(nome, 'Nome é obrigatório');
                isValid = false;
            }

            if (Validator.isEmpty(cpf.value)) {
                Validator.showError(cpf, 'CPF é obrigatório');
                isValid = false;
            } else if (!Validator.isValidCPF(cpf.value)) {
                Validator.showError(cpf, 'CPF inválido');
                isValid = false;
            }

            if (Validator.isEmpty(email.value)) {
                Validator.showError(email, 'E-mail é obrigatório');
                isValid = false;
            } else if (!Validator.isValidEmail(email.value)) {
                Validator.showError(email, 'E-mail inválido');
                isValid = false;
            }

            if (Validator.isEmpty(telefone.value)) {
                Validator.showError(telefone, 'Telefone é obrigatório');
                isValid = false;
            } else if (!Validator.isValidPhone(telefone.value)) {
                Validator.showError(telefone, 'Telefone inválido');
                isValid = false;
            }

            if (Validator.isEmpty(dataNascimento.value)) {
                Validator.showError(dataNascimento, 'Data de nascimento é obrigatória');
                isValid = false;
            }

            if (Validator.isEmpty(password.value)) {
                Validator.showError(password, 'Senha é obrigatória');
                isValid = false;
            } else if (password.value.length < 6) {
                Validator.showError(password, 'Senha deve ter no mínimo 6 caracteres');
                isValid = false;
            }

            if (password.value !== confirmPassword.value) {
                Validator.showError(confirmPassword, 'As senhas não coincidem');
                isValid = false;
            }

            if (!isValid) return;

            try {
                // TODO: Integrar com API real
                // await API.post('/voluntarios', {
                //     nome: nome.value,
                //     cpf: cpf.value.replace(/[^\d]/g, ''),
                //     email: email.value,
                //     telefone: telefone.value.replace(/[^\d]/g, ''),
                //     dataNascimento: dataNascimento.value,
                //     endereco: endereco.value,
                //     senha: password.value
                // });

                UI.showAlert('Cadastro realizado com sucesso! Redirecionando...', 'success');

                // Redireciona após 2 segundos
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);

            } catch (error) {
                UI.showAlert('Erro ao realizar cadastro. Tente novamente.', 'danger');
            }
        });
    </script>
</body>
</html>
