<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOARC - Relat√≥rios</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="dashboard.html" class="logo">DOARC</a>
            <div class="user-menu">
                <span class="user-name" id="userName">Volunt√°rio</span>
                <button class="btn-logout" id="logoutBtn">Sair</button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <ul class="nav-list">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link">Dashboard</a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">Gerenciar</a>
                <ul class="submenu">
                    <li class="submenu-item"><a href="gerenciar-doadores.html" class="submenu-link">Doadores</a></li>
                    <li class="submenu-item"><a href="gerenciar-donatarios.html" class="submenu-link">Donat√°rios</a></li>
                    <li class="submenu-item"><a href="gerenciar-produtos.html" class="submenu-link">Produtos</a></li>
                    <li class="submenu-item"><a href="gerenciar-categorias.html" class="submenu-link">Categorias</a></li>
                    <li class="submenu-item"><a href="gerenciar-voluntarios.html" class="submenu-link">Volunt√°rios</a></li>
                    <li class="submenu-item"><a href="gerenciar-campanhas.html" class="submenu-link">Campanhas</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">Doa√ß√µes</a>
                <ul class="submenu">
                    <li class="submenu-item"><a href="receber-doacoes.html" class="submenu-link">Receber Doa√ß√µes</a></li>
                    <li class="submenu-item"><a href="efetuar-doacoes.html" class="submenu-link">Efetuar Doa√ß√µes</a></li>
                    <li class="submenu-item"><a href="agendar-doacao.html" class="submenu-link">Agendar Doa√ß√£o</a></li>
                    <li class="submenu-item"><a href="agendar-retirada.html" class="submenu-link">Agendar Retirada</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link">Estoque</a>
                <ul class="submenu">
                    <li class="submenu-item"><a href="visualizar-estoque.html" class="submenu-link">Visualizar Estoque</a></li>
                    <li class="submenu-item"><a href="registrar-acerto.html" class="submenu-link">Acerto de Estoque</a></li>
                    <li class="submenu-item"><a href="lancar-compra.html" class="submenu-link">Lan√ßar Compra/Arrecada√ß√£o</a></li>
                    <li class="submenu-item"><a href="agendar-higienizacao.html" class="submenu-link">Agendar Higieniza√ß√£o</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a href="relatorios.html" class="nav-link active">Relat√≥rios</a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <div class="breadcrumb">
            <div class="breadcrumb-item"><a href="dashboard.html">Dashboard</a></div>
            <div class="breadcrumb-item active">Relat√≥rios</div>
        </div>

        <div class="card">
            <div class="card-header">
                <h1 class="card-title">Relat√≥rios</h1>
                <p class="card-subtitle">Gere relat√≥rios detalhados sobre doa√ß√µes, produtos e volunt√°rios</p>
            </div>
            <div class="card-body">
                <!-- Sele√ß√£o de Tipo de Relat√≥rio -->
                <div class="form-group">
                    <label for="tipoRelatorio" class="form-label required">Tipo de Relat√≥rio</label>
                    <select id="tipoRelatorio" class="form-control form-select" onchange="atualizarFiltros()">
                        <option value="">Selecione o tipo de relat√≥rio</option>
                        <option value="doacoes">Relat√≥rio de Doa√ß√µes</option>
                        <option value="produtos">Relat√≥rio de Produtos</option>
                        <option value="voluntarios">Relat√≥rio de Volunt√°rios</option>
                        <option value="campanhas">Relat√≥rio de Campanhas</option>
                        <option value="doadores">Relat√≥rio de Doadores</option>
                        <option value="donatarios">Relat√≥rio de Donat√°rios</option>
                    </select>
                </div>

                <!-- Filtros Gerais -->
                <div id="filtrosGerais" style="display: none;">
                    <h3 style="color: var(--primary-color); margin: 2rem 0 1rem;">Filtros</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataInicio" class="form-label">Data In√≠cio</label>
                            <input type="date" id="dataInicio" class="form-control">
                        </div>

                        <div class="form-group">
                            <label for="dataFim" class="form-label">Data Fim</label>
                            <input type="date" id="dataFim" class="form-control">
                        </div>
                    </div>

                    <!-- Filtros Espec√≠ficos de Doa√ß√µes -->
                    <div id="filtrosDoacoes" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="tipoDoacao" class="form-label">Tipo de Doa√ß√£o</label>
                                <select id="tipoDoacao" class="form-control form-select">
                                    <option value="">Todos</option>
                                    <option value="recebida">Doa√ß√µes Recebidas</option>
                                    <option value="efetuada">Doa√ß√µes Efetuadas</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filtroVoluntario" class="form-label">Volunt√°rio</label>
                                <select id="filtroVoluntario" class="form-control form-select">
                                    <option value="">Todos</option>
                                    <option value="1">Jo√£o Silva</option>
                                    <option value="2">Maria Santos</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filtroProduto" class="form-label">Produto</label>
                                <select id="filtroProduto" class="form-control form-select">
                                    <option value="">Todos</option>
                                    <option value="1">Arroz</option>
                                    <option value="2">Feij√£o</option>
                                    <option value="3">√ìleo</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros Espec√≠ficos de Produtos -->
                    <div id="filtrosProdutos" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="filtroCategoria" class="form-label">Categoria</label>
                                <select id="filtroCategoria" class="form-control form-select">
                                    <option value="">Todas</option>
                                    <option value="1">Alimentos</option>
                                    <option value="2">Roupas</option>
                                    <option value="3">Higiene</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filtroEstoque" class="form-label">Situa√ß√£o do Estoque</label>
                                <select id="filtroEstoque" class="form-control form-select">
                                    <option value="">Todos</option>
                                    <option value="baixo">Estoque Baixo</option>
                                    <option value="normal">Estoque Normal</option>
                                    <option value="alto">Estoque Alto</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="filtroValidade" class="form-label">Validade</label>
                                <select id="filtroValidade" class="form-control form-select">
                                    <option value="">Todos</option>
                                    <option value="vencidos">Vencidos</option>
                                    <option value="proximo_vencimento">Pr√≥ximo ao Vencimento</option>
                                    <option value="validos">V√°lidos</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Filtros Espec√≠ficos de Volunt√°rios -->
                    <div id="filtrosVoluntarios" style="display: none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="filtroIdadeMin" class="form-label">Idade M√≠nima</label>
                                <input type="number" id="filtroIdadeMin" class="form-control" min="0">
                            </div>

                            <div class="form-group">
                                <label for="filtroIdadeMax" class="form-label">Idade M√°xima</label>
                                <input type="number" id="filtroIdadeMax" class="form-control" min="0">
                            </div>

                            <div class="form-group">
                                <label for="filtroAnosParceria" class="form-label">Anos de Parceria</label>
                                <input type="number" id="filtroAnosParceria" class="form-control" min="0">
                            </div>
                        </div>
                    </div>

                    <!-- Bot√µes de A√ß√£o -->
                    <div class="form-group mt-3">
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="gerarRelatorio()">
                                üìä Gerar Relat√≥rio
                            </button>
                            <button class="btn btn-success" onclick="exportarPDF()">
                                üìÑ Exportar PDF
                            </button>
                            <button class="btn btn-secondary" onclick="exportarExcel()">
                                üìë Exportar Excel
                            </button>
                            <button class="btn btn-outline" onclick="limparFiltros()">
                                üîÑ Limpar Filtros
                            </button>
                        </div>
                    </div>
                </div>

                <!-- √Årea de Resultados -->
                <div id="resultadosRelatorio" style="display: none; margin-top: 2rem;">
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem;">Resultados</h3>

                    <!-- Estat√≠sticas Resumidas -->
                    <div id="estatisticasResumo" class="dashboard-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <!-- Estat√≠sticas ser√£o inseridas dinamicamente -->
                    </div>

                    <!-- Tabela de Dados -->
                    <div class="table-container mt-3">
                        <table class="table table-striped">
                            <thead id="tabelaCabecalho">
                                <!-- Cabe√ßalho ser√° inserido dinamicamente -->
                            </thead>
                            <tbody id="tabelaDados">
                                <!-- Dados ser√£o inseridos dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="../js/app.js"></script>
    <script>
        function atualizarFiltros() {
            const tipo = document.getElementById('tipoRelatorio').value;
            const filtrosGerais = document.getElementById('filtrosGerais');
            const filtrosDoacoes = document.getElementById('filtrosDoacoes');
            const filtrosProdutos = document.getElementById('filtrosProdutos');
            const filtrosVoluntarios = document.getElementById('filtrosVoluntarios');

            // Esconde todos os filtros
            filtrosGerais.style.display = 'none';
            filtrosDoacoes.style.display = 'none';
            filtrosProdutos.style.display = 'none';
            filtrosVoluntarios.style.display = 'none';

            if (tipo) {
                filtrosGerais.style.display = 'block';

                // Mostra filtros espec√≠ficos
                if (tipo === 'doacoes') {
                    filtrosDoacoes.style.display = 'block';
                } else if (tipo === 'produtos') {
                    filtrosProdutos.style.display = 'block';
                } else if (tipo === 'voluntarios') {
                    filtrosVoluntarios.style.display = 'block';
                }
            }

            // Esconde resultados
            document.getElementById('resultadosRelatorio').style.display = 'none';
        }

        function gerarRelatorio() {
            const tipo = document.getElementById('tipoRelatorio').value;

            if (!tipo) {
                UI.showAlert('Selecione um tipo de relat√≥rio', 'warning');
                return;
            }

            UI.showLoading();

            // TODO: Integrar com API real
            // Simula√ß√£o de gera√ß√£o de relat√≥rio
            setTimeout(() => {
                UI.hideLoading();

                const resultados = document.getElementById('resultadosRelatorio');
                const estatisticas = document.getElementById('estatisticasResumo');
                const cabecalho = document.getElementById('tabelaCabecalho');
                const dados = document.getElementById('tabelaDados');

                resultados.style.display = 'block';

                // Dados de exemplo baseados no tipo
                if (tipo === 'doacoes') {
                    estatisticas.innerHTML = `
                        <div class="stat-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <div class="stat-value">125</div>
                            <div class="stat-label">Total de Doa√ß√µes</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                            <div class="stat-value">R$ 15.250</div>
                            <div class="stat-label">Valor Total</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #d68910);">
                            <div class="stat-value">3.500</div>
                            <div class="stat-label">Itens Doados</div>
                        </div>
                    `;

                    cabecalho.innerHTML = `
                        <tr>
                            <th>Data</th>
                            <th>Tipo</th>
                            <th>Doador/Donat√°rio</th>
                            <th>Produto/Valor</th>
                            <th>Quantidade</th>
                            <th>Volunt√°rio</th>
                        </tr>
                    `;

                    dados.innerHTML = `
                        <tr>
                            <td>10/10/2025</td>
                            <td><span class="badge badge-success">Recebida</span></td>
                            <td>Jo√£o Silva</td>
                            <td>Arroz</td>
                            <td>50 kg</td>
                            <td>Maria Santos</td>
                        </tr>
                        <tr>
                            <td>09/10/2025</td>
                            <td><span class="badge badge-danger">Efetuada</span></td>
                            <td>Fam√≠lia Costa</td>
                            <td>Cesta B√°sica</td>
                            <td>5 un</td>
                            <td>Pedro Lima</td>
                        </tr>
                        <tr>
                            <td>08/10/2025</td>
                            <td><span class="badge badge-success">Recebida</span></td>
                            <td>Empresa ABC</td>
                            <td>R$ 1.000,00</td>
                            <td>-</td>
                            <td>Ana Paula</td>
                        </tr>
                    `;
                } else if (tipo === 'produtos') {
                    estatisticas.innerHTML = `
                        <div class="stat-card" style="background: linear-gradient(135deg, #3498db, #2980b9);">
                            <div class="stat-value">150</div>
                            <div class="stat-label">Produtos Cadastrados</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #2ecc71, #27ae60);">
                            <div class="stat-value">2.500</div>
                            <div class="stat-label">Itens em Estoque</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            <div class="stat-value">12</div>
                            <div class="stat-label">Pr√≥ximos ao Vencimento</div>
                        </div>
                    `;

                    cabecalho.innerHTML = `
                        <tr>
                            <th>Produto</th>
                            <th>Categoria</th>
                            <th>Quantidade</th>
                            <th>Validade</th>
                            <th>Status</th>
                        </tr>
                    `;

                    dados.innerHTML = `
                        <tr>
                            <td>Arroz 5kg</td>
                            <td>Alimentos</td>
                            <td>150 un</td>
                            <td>15/12/2025</td>
                            <td><span class="badge badge-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>Feij√£o 1kg</td>
                            <td>Alimentos</td>
                            <td>80 un</td>
                            <td>20/11/2025</td>
                            <td><span class="badge badge-success">Normal</span></td>
                        </tr>
                        <tr>
                            <td>√ìleo 900ml</td>
                            <td>Alimentos</td>
                            <td>25 un</td>
                            <td>30/10/2025</td>
                            <td><span class="badge badge-warning">Pr√≥ximo ao Vencimento</span></td>
                        </tr>
                    `;
                } else if (tipo === 'voluntarios') {
                    estatisticas.innerHTML = `
                        <div class="stat-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <div class="stat-value">25</div>
                            <div class="stat-label">Volunt√°rios Ativos</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #d68910);">
                            <div class="stat-value">150</div>
                            <div class="stat-label">Doa√ß√µes Realizadas</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #1abc9c, #16a085);">
                            <div class="stat-value">3.5</div>
                            <div class="stat-label">Anos M√©dios de Parceria</div>
                        </div>
                    `;

                    cabecalho.innerHTML = `
                        <tr>
                            <th>Nome</th>
                            <th>Idade</th>
                            <th>Cadastro</th>
                            <th>Doa√ß√µes</th>
                            <th>Status</th>
                        </tr>
                    `;

                    dados.innerHTML = `
                        <tr>
                            <td>Jo√£o Silva</td>
                            <td>35 anos</td>
                            <td>10/01/2020</td>
                            <td>45</td>
                            <td><span class="badge badge-success">Ativo</span></td>
                        </tr>
                        <tr>
                            <td>Maria Santos</td>
                            <td>42 anos</td>
                            <td>15/03/2019</td>
                            <td>68</td>
                            <td><span class="badge badge-success">Ativo</span></td>
                        </tr>
                        <tr>
                            <td>Pedro Lima</td>
                            <td>28 anos</td>
                            <td>20/06/2023</td>
                            <td>22</td>
                            <td><span class="badge badge-success">Ativo</span></td>
                        </tr>
                    `;
                }

                UI.showAlert('Relat√≥rio gerado com sucesso!', 'success');
            }, 1000);
        }

        function exportarPDF() {
            const tipo = document.getElementById('tipoRelatorio').value;

            if (!tipo) {
                UI.showAlert('Gere um relat√≥rio antes de exportar', 'warning');
                return;
            }

            // TODO: Implementar exporta√ß√£o real para PDF
            UI.showAlert('Exportando relat√≥rio para PDF...', 'info');

            setTimeout(() => {
                UI.showAlert('Relat√≥rio exportado com sucesso!', 'success');
            }, 1500);
        }

        function exportarExcel() {
            const tipo = document.getElementById('tipoRelatorio').value;

            if (!tipo) {
                UI.showAlert('Gere um relat√≥rio antes de exportar', 'warning');
                return;
            }

            // TODO: Implementar exporta√ß√£o real para Excel
            UI.showAlert('Exportando relat√≥rio para Excel...', 'info');

            setTimeout(() => {
                UI.showAlert('Relat√≥rio exportado com sucesso!', 'success');
            }, 1500);
        }

        function limparFiltros() {
            document.getElementById('dataInicio').value = '';
            document.getElementById('dataFim').value = '';
            document.getElementById('tipoDoacao').value = '';
            document.getElementById('filtroVoluntario').value = '';
            document.getElementById('filtroProduto').value = '';
            document.getElementById('filtroCategoria').value = '';
            document.getElementById('filtroEstoque').value = '';
            document.getElementById('filtroValidade').value = '';
            document.getElementById('filtroIdadeMin').value = '';
            document.getElementById('filtroIdadeMax').value = '';
            document.getElementById('filtroAnosParceria').value = '';
            document.getElementById('resultadosRelatorio').style.display = 'none';
        }
    </script>
</body>
</html>
